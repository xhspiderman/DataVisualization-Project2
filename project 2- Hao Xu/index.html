<!DOCTYPE html>
<html>
	<head>
		<script src="js/taffy.js"></script>
		<script src="js/2digitHSCodes.js"></script>
		<script src="js/4digitHSCodes.js"></script>
		<script src="js/6digitHSCodes.js"></script>
		<script type="text/javascript" src="js/importDestination.js"></script>
		<script type="text/javascript" src="js/exportDestination.js"></script>
		<script type="text/javascript" src="js/importTop25.js"></script>
		<script type="text/javascript" src="js/exportTop25.js"></script>
		<script type="text/javascript" src="js/stateAbbreviations.js"></script>
		<script src="multiple-select-master/jquery-1.11.0.min.js"></script>
		<script src="multiple-select-master/jquerymultipleselect.js"></script>
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		<script type="text/javascript" src="js/functions.js"></script>
		
		<link rel="stylesheet" type="text/css" href="multiple-select-master/multiple-select.css">

		<script>
        // Three level HS code
		var HS2 = TAFFY( HS2_code );
		var HS4 = TAFFY( HS4_code );
		var HS6 = TAFFY( HS6_code );
		// when outputing hscode field, 01 will be 1, but when doing matching, we still need 01 to match it !!!!
				//create databases from JSON data
		var importDestinationDB = TAFFY(importDestination);
		var exportDestinationDB = TAFFY(exportDestination);
		var importTop25DB = TAFFY(importTop25);
		var exportTop25DB = TAFFY(exportTop25);
		var stateAbbreviationsDB = TAFFY(StateAbbreviations);
		google.load('visualization', '1', {'packages': ['geochart']});
		google.setOnLoadCallback(drawRegionsMap);		
		</script>
	</head>
	<body>
    <h1>Trading Data</h1>
    <!-- display results for selection -->
	<!--     <p id="eventResult">Here is the result of event.</p> -->
    <select multiple="multiple" id='First_Level_Selection' style='width:1100px;'></select>
    <input type="checkbox" id="includeDetail">include detail
	<select id="statesListbox_by_commody" multiple size="20"></select>	
    <hr>
	<!-- multi-select box with all states -->
	<select id="statesListbox_by_country" multiple size="20"></select>
	
	<!-- US map -->
	<div id="USchart_div" style="width: 600px; height: 300px;"></div>

    <!-- display results for selected HS6 code -->
    <div id='selected_HS_Code'></div>

    <script>
    // Used to store Selected HS2 code
    var selectedValues = [];
    // used to store selected HS6 code
    var selected_HS6_Codes = [];

    
    $( document ).ready(function() {
	    selectionBox()// Prepare all data needed for initializing selectBox
	    selectBoxInitialization(); // Initialize selectBox
    	populateListbox();
	    $("#includeDetail").click(function(){
	    	$("#First_Level_Selection").html("");
            selectionBox();
            selectBoxInitialization();
	    });
    	//populate results table when radio button or listbox changes
		$("#statesListbox_by_country").change(function(){
			var selectedStates = $("#statesListbox_by_country").val() || [];
			var HSarray = selected_HS6_Codes
			// console.log('selectedStates: ')
			// console.log(selectedStates)
			// console.log('HScode: ')
			// console.log(HSarray)
	        populateResultsTable_by_country(selectedStates, HSarray);
		});
		$("#statesListbox_by_commody").change(function(){
			var selectedStates = $("#statesListbox_by_commody").val() || [];
			var HSarray = selected_HS6_Codes
			// console.log('selectedStates: '+selectedStates)
			// console.log('HScode: '+HSarray)
	        populateResultsTable_by_commody(selectedStates, HSarray)
		});

	});
    </script>

	</body>
				
</html>