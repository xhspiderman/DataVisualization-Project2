<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<title>My Favourite Things</title>
		<script src="js/taffy.js"></script>
		<script src="js/2digitHSCodes.js"></script>
		<script src="js/4digitHSCodes.js"></script>
		<script src="js/6digitHSCodes.js"></script>
		<script type="text/javascript" src="js/importDestination.js"></script>
		<script type="text/javascript" src="js/exportDestination.js"></script>
		<script type="text/javascript" src="js/importTop25.js"></script>
		<script type="text/javascript" src="js/exportTop25.js"></script>
		<script type="text/javascript" src="js/stateAbbreviations.js"></script>
		<script src="multiple-select-master/jquery-1.11.0.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="multiple-select-master/jquerymultipleselect.js"></script>
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		<script type="text/javascript" src="js/functions.js"></script>
		<link rel="stylesheet" type="text/css" href="multiple-select-master/multiple-select.css">

		<script>
        // Three level HS code
		var HS2 = TAFFY( HS2_code );
		var HS4 = TAFFY( HS4_code );
		var HS6 = TAFFY( HS6_code );
		// when outputing hscode field, 01 will be 1, but when doing matching, we still need 01 to match it !!!!
		//create databases from JSON data
		var importDestinationDB = TAFFY(importDestination);
		var exportDestinationDB = TAFFY(exportDestination);
		var importTop25DB = TAFFY(importTop25);
		var exportTop25DB = TAFFY(exportTop25);
		var stateAbbreviationsDB = TAFFY(StateAbbreviations);
		var importResultsTable_by_country;
		var exportResultsTable_by_country;
		var importResultsTable_by_commody;
		var exportResultsTable_by_commody;
		var chart_by_country
		var chart_by_commody
		var chart_by_country_export
		var chart_by_commody_export
		var USchart_by_commody
		var USChart_by_country
		var data_by_country
		var data_by_commody
		var data_by_country_export
		var data_by_commody_export
		var year_to_show = '2012'
		var year_to_show_by_country = '2012'
		var ie_to_show = 'import'
		var ie_to_show_by_country = 'import'

		</script>
	</head>
	<body>
     <h1>&nbsp;My Favourite Things</h1>
    <br>

    <div class="row well" style='background-color:white;'>
    	<div class='col-xs-12'>
			<h2> Import/Export Details of US <small>Selecting Commodies by HScodes</small></h2>
		    <select multiple="multiple" id='First_Level_Selection' style='width:1200px;'></select>
		    <input type="checkbox" id="includeDetail">include detail
		    <p> </p>
		</div>
		<script type="text/javascript">
	      google.load('visualization', '1', {'packages': ['geochart']});
	      google.load("visualization", "1", {packages:["corechart"]});
	    </script>
		<div class='col-xs-4'>
			<div class='row'>
			<div id="year_by_commody" class='col-xs-7 col-xs-offset-1' style="height: 50px;padding-left:5px;">
				<div class="btn-group btn-group-sm" data-toggle="buttons">
				  <label for="option1" class="btn btn-default">
				    <input type="radio" name="yearoptions" id="option1">2009</input>
				  </label>
				  <label for="option2" class="btn btn-default">
				    <input type="radio" name="yearoptions" id="option2">2010</input>
				  </label>
				  <label for="option3" class="btn btn-default">
				    <input type="radio" name="yearoptions" id="option3">2011</input>
				  </label>
  				  <label for="option4" class="btn btn-default active">
				    <input type="radio" name="yearoptions" id="option4">2012</input>
				  </label>
				</div>
			</div>
			<div id="imorex" class='col-xs-4' style="height: 50px;padding-left:5px;">
				<div class="btn-group btn-group-sm" data-toggle="buttons">
				  <label for="ieoption1" class="btn btn-default active">
				    <input type="radio" name="ieoptions" id="ieoption1">import</input>
				  </label>
				  <label for="ieoption2" class="btn btn-default">
				    <input type="radio" name="ieoptions" id="ieoption2">export</input>
				  </label>
				</div>
			</div>
			</div>
	        <div id="USchart_div_by_commody" class='col-xs-12' style="height: 250px;padding-left:5px;"></div>
		</div>
    	<div class="col-xs-4" style='display:none;'>
		    <select id="statesListbox_by_commody" multiple size="20" style='height:600px; padding-left:5px;'></select>
		</div>
	    <div class="col-xs-8">
	    	<div class='row'>
				<div id="piechart_by_commody" class="col-xs-6" style='height:300px;'></div>
				<div id="columnchart_by_commody" class="col-xs-6" style='height:300px;'></div>
			</div>
			<div class='row'>
				<div id="export_piechart_by_commody" class="col-xs-6" style='height:300px;'></div>
				<div id="export_columnchart_by_commody" class="col-xs-6" style='height:300px;'></div>
			</div>
		</div>
	</div>

	<div class='row well' style='background-color:white;'>
    	<div class='col-xs-12'>
			<h2> Import/Export Details of US with Different Countries</h2>
		</div>

		<div class='col-xs-4'>
			<div class='row'>
			<div id="year_by_country" class='col-xs-7 col-xs-offset-1' style="height: 50px;padding-left:5px;">
				<div class="btn-group btn-group-sm" data-toggle="buttons">
				  <label for="option1_by_country" class="btn btn-default">
				    <input type="radio" name="yearoptions_by_country" id="option1_by_country">2009</input>
				  </label>
				  <label for="option2_by_country" class="btn btn-default">
				    <input type="radio" name="yearoptions_by_country" id="option2_by_country">2010</input>
				  </label>
				  <label for="option3_by_country" class="btn btn-default">
				    <input type="radio" name="yearoptions_by_country" id="option3_by_country">2011</input>
				  </label>
  				  <label for="option4_by_country" class="btn btn-default active">
				    <input type="radio" name="yearoptions_by_country" id="option4_by_country">2012</input>
				  </label>
				</div>
			</div>
			<div id="imorex_by_country" class='col-xs-4' style="height: 50px;padding-left:5px;">
				<div class="btn-group btn-group-sm" data-toggle="buttons">
				  <label for="ieoption1_by_country" class="btn btn-default active">
				    <input type="radio" name="ieoptions_by_country" id="ieoption1_by_country">import</input>
				  </label>
				  <label for="ieoption2_by_country" class="btn btn-default">
				    <input type="radio" name="ieoptions_by_country" id="ieoption2_by_country">export</input>
				  </label>
				</div>
			</div>
			</div>

	        <div id="USchart_div_by_country" style="height: 250px;padding-left:5px;"></div>
		</div>
		<div class="col-xs-4" style='display:none;'>
			<select id="statesListbox_by_country" multiple size="20" style='height:600px; padding-left:5px;'></select>
		</div>
	    <div class='col-xs-8'>
	    	<div class='row'>
				<div id="piechart_by_country" class="col-xs-6" style='height:300px;'></div>
			    <div id="columnchart_by_country" class="col-xs-6" style='height:300px;'></div>
			</div>
			<div class='row'>
				<div id="export_piechart_by_country" class="col-xs-6" style='height:300px;'></div>
			    <div id="export_columnchart_by_country" class="col-xs-6" style='height:300px;'></div>
			</div>
		</div>
	</div>
    <!-- display results for selected HS6 code -->
    <div id='selected_HS_Code'></div>

    <script>
    // Used to store Selected HS2 code
    var selectedValues = [];
    // used to store selected HS6 code
    var selected_HS6_Codes = [];
    
    $( document ).ready(function() {
	    selectionBox()// Prepare all data needed for initializing selectBox
	    selectBoxInitialization(); // Initialize selectBox
    	populateListbox();
    	// output default results
    	populateResultsTable_by_country();
    	populateResultsTable_by_commody();
    	// initial display of column chart
        drawColumnChart_by_commody("SMFD IRN/NAL STL LT .25 PCT CRB RECT CS WID 2",'import')
        drawColumnChart_by_commody("PASS VEH SPK-IG INT COM RCPR P ENG > 3000 CC",'export')
        drawColumnChart_by_country('Korea South', 'import')
        drawColumnChart_by_country(" Canada", 'export')
        drawRegionsMap_by_commody()
        drawRegionsMap_by_country()

	    $("#includeDetail").click(function(){
	    	$("#First_Level_Selection").html("");
            selectionBox();
            selectBoxInitialization();
	    });
    	//populate results table when radio button or listbox changes
		$("#statesListbox_by_country").change(function(){
	        populateResultsTable_by_country();
		});
		$("#statesListbox_by_commody").change(function(){
	        populateResultsTable_by_commody()
		});

		$('.btn').button()
        $('#year_by_commody').change(function(){
        	var temp = $("input[name='yearoptions']:checked")
        	var $label = $("label[for='"+temp.attr("id")+"']")
        	// console.log($label.text().replace(/\s+/g,""))
        	year_to_show = $label.text().replace(/\s+/g,"")
        	console.log(year_to_show)
        	populateResultsTable_by_commody()
        })
        $('#imorex').change(function(){
        	var temp = $("input[name='ieoptions']:checked")
        	var $label = $("label[for='"+temp.attr("id")+"']")
        	// console.log($label.text().replace(/\s+/g,""))
        	ie_to_show = $label.text().replace(/\s+/g,"")
        	console.log(ie_to_show)
        })
        $('#year_by_country').change(function(){
        	var temp = $("input[name='yearoptions_by_country']:checked")
        	var $label = $("label[for='"+temp.attr("id")+"']")
        	// console.log($label.text().replace(/\s+/g,""))
        	year_to_show_by_country = $label.text().replace(/\s+/g,"")
        	console.log(year_to_show_by_country)
        	populateResultsTable_by_country()
        })
        $('#imorex_by_country').change(function(){
        	var temp = $("input[name='ieoptions_by_country']:checked")
        	var $label = $("label[for='"+temp.attr("id")+"']")
        	// console.log($label.text().replace(/\s+/g,""))
        	ie_to_show_by_country = $label.text().replace(/\s+/g,"")
        	console.log(ie_to_show_by_country)
        })

	});
    </script>

	</body>
				
</html>